# yacontest-parser
This is parser problems for [yandex contest](https://contest.yandex.ru).

It's working due to requests and beautyfullsoup library.

В яндекс.соревнованиях задачи идут на время, и для сохранения этого времени был написан этот парсер.
### Что делает парсер?

1. Создает каталог с названием контеста
2. Создает файлы с названиями проблем из контеста
3. Файлы создаются по шаблону из пакета
4. В шаблоне используется тег <DESCRIPTION> и вместо него вставляется описание задачи из контеста
5. В шаблоне реализована структура, по которой можно сразу запускать предложенные примеры тестов

### Как его запустить?
1. Склонировать репозиторий
2. Установить пакеты из `requirements.txt` в виртуальное или локальное окружение
3. Зайти через браузер в контест и посмотреть на ссылку, там будет id контеста (обычно пять цифр)
4. Отредактировать в файле `parse_contest.py` переменную CONTEST (в ней хранится номер контеста)
5. Убедиться, что вы авторизованы в контесте
6. Открыть в браузере режиме инспектирования (в хроме ctrl+shift+i)
7. Для хрома: идем во вкладку `Networks`, перегружаем страницу, щелкаем в любой загруженный файл, в открывшемся боковом меню `Headers`, там ищем `Requests headers`, среди них переменную cookie. Копируем ее полностью (там очень много букв). Обязательно прочитайте внизу страницы раздел ЭТО ВАЖНО.
8. Создать файл `secret.py` и положить в него cookie из браузера (как это должно выглядеть можно посмотреть в файле `example_secret.py`)
9. Нужно убедиться, что контест стартован, если он не стартован, данные спарсить нельзя, т.к. они будут недоступны
10. Стартуем скрипт

В том месте откуда запустили скрипт появится новый каталог, который будет содержать питоновский файлы с условиями задач, фикстурами (данные тестов) и обвзякой для удобного запуска. Дело за малым, нужно поправить функцию take_data (там разбираются данные из фикстур, в каждом задании может быть разный подход) и написать своё решение в функции solve.
Как только локальные тесты пройдены, можно жать ctrl+a, ctrl+c и вставлять в контест ctrl+v. Код в контесте можно выполнять.

В шаблоне также импортируется логгер. Часто это намного удобнее использования принтов, но если код написан с ошибками (падает), то логгер в режиме info не выполнится, т.к. код упадет раньше. В качестве быстрого решения надо установить режим логирования в error.
Короче если вам интересно как управиться с логгером почитайте [ТУТ](https://docs.python.org/3/library/logging.html)

## Из замеченных особенностей:
- В функции run проводится проверка на путь выполнения скрипта и если скрипт выполняется напрямую из pycharm или установлен флаг тестового режима, то запуститься проверка фикстур
- Некоторые задачи очень тонко относятся к времени выполнения, все обвесы из шаблона могут немного съедать время. Если нужен чистый код, лучше оставить только функции take_date и solve


# **ВНИМАНИЕ! ЭТО ОЧЕНЬ ВАЖНО!**
Хранение куки в файле это не безопасно. Никогда и никому не передавайте свои куки в открытом виде!
После использования скрипта куки в файле `secret.py` нужно удалить!
Утечка файла куки может привести к компрометации вашего яндекс аккаунта! 


*ОТКАЗ ОТ ОТВЕТСТВЕННОСТИ*
> Внимание, использование данного парсера остается полностью на вашей совести
> Автор не несет никакой ответственности за все возможные проблемы
